# Plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-yank'

# Colors
baseColor="#191724"
surfaceColor="#1f1d2e"
overlayColor="#26233a"
mutedColor="#6e6a86"
subtleColor="#908caa"
textColor="#e0def4"
loveColor="#eb6f92"
goldColor="#f6c177"
roseColor="#ebbcba"
pineColor="#31748f"
foamColor="#9ccfd8"
irisColor="#c4a7e7"
highlightLowColor="#21202e"
highlightMedColor="#403d52"
highlightHighColor="#524f67"

# Options

set -g default-terminal "${TERM}"
set -sg terminal-overrides ",*:RGB"

set-option -g renumber-windows on
set -g mouse on
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set -g xterm-keys on
set-window-option -g mode-keys vi

set-hook -g client-detached \
  'run-shell "hyprctl dispatch tagwindow -- -tmux"'

# Unbind default split keys
unbind '"'
unbind %
unbind -n C-Left
unbind -n C-Right
unbind -n C-Up
unbind -n C-Down

# Keybindings

unbind C-b
set -g prefix C-a
bind C-a send-prefix

bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi V send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

bind s split-window -c "#{pane_current_path}"
bind v split-window -h -c "#{pane_current_path}"
bind t new-window -c "#{pane_current_path}"

bind -r h resize-pane -L 5
bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5

bind-key c kill-window
bind-key x kill-pane
bind w choose-tree -s -w

bind -n C-h select-pane -L
bind -n C-j select-pane -D
bind -n C-k select-pane -U
bind -n C-l select-pane -R

bind C-d display-popup \
    -d "#{pane_current_path}" \
    -w 80% \
    -h 80% \
    -E "lazydocker"

## tmux-sessionizer
bind Tab display-popup -E -w 40% -h 80% "$XDG_CONFIG_HOME/scripts/tmux-session.sh"

# Theme
set-option -g status-position top
set -g status-justify absolute-centre
set -g status-interval 1

## Pane background color (inactive + active panes)
set -g window-style "bg=${surfaceColor}"
set -g window-active-style "bg=${baseColor}"

set -g status-style "fg=${textColor},bg=${overlayColor}"
set -g message-style "fg=${textColor},bg=${loveColor}"
set -g mode-style "fg=${highlightLowColor},bg=${highlightHighColor}"

set -g status-left "#[fg=#{?client_prefix,${overlayColor},${textColor}},bg=#{?client_prefix,${irisColor},${overlayColor}},bold] #S"
set -g status-left-length 100
set -g status-right "#[fg=${textColor}] #(tomato -t)"
set -g status-right-length 100

set -g window-status-format "#[fg=${textColor},bg=${overlayColor}]  #I #W"
set -g window-status-current-format "#[fg=${irisColor},bg=${overlayColor}]  #I #W"

set -g pane-border-style "fg=${highlightMedColor},bg=${surfaceColor}"
set -g pane-active-border-style "fg=${irisColor},bg=${surfaceColor}"

run '~/.tmux/plugins/tpm/tpm'
